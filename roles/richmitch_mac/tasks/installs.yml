# roles/richmitch_mac/tasks/installs.yml

- name: Update homebrew by reinstalling git
  homebrew:
    name: git
    state: latest
    update_homebrew: yes
  tags:
    - brew

- name: Install homebrew packages
  homebrew:
    name: "{{ item }}"
    state: latest
  loop: "{{ homebrew_packages }}"
  tags:
    - brew

- name: Install homebrew cask packages
  homebrew_cask: 
    name: "{{ item.cask }}"
    state: latest
  loop: "{{ apps }}"
  when: item.cask is defined
  tags:
    - brew

- name: homebrew cleanup
  command: brew cleanup
